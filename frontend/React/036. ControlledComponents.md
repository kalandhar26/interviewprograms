# Controlled Components

- In React, a controlled component is a form element whose value is controlled by React state. This means that the state
  of the component is the single source of truth for the value of the input, and any changes to the input are handled by
  updating the state.
- Controlled components are easier to work with in React because they can be easily updated and synchronized with other
  components. They also make it easier to validate user input and handle form submissions.
- In a controlled component, the value of the input is always set by the state, and any changes to the input are handled
  by updating the state. This can be done using the `onChange` event, which is triggered whenever the value of the input
  changes.
- A Controlled Component is a form element whose value is controlled by React state.
- Single Source of Truth = React State
-
    - In React, a controlled component is a form element whose value is fully controlled by React state, ensuring
      predictable behavior and easier validation.

## Controlled Input

```jsx
function LoginForm() {
  const [username, setUsername] = React.useState("");

  const handleChange = (e) => {
    setUsername(e.target.value);
  };

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log(username);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input 
        type="text"
        value={username}
        onChange={handleChange}
      />
      <button type="submit">Submit</button>
    </form>
  );
}
```

| Thing              | Role                 |
|--------------------|----------------------|
| `value={username}` | React controls input |
| `onChange`         | Updates state        |
| `useState`         | Stores input value   |
| `preventDefault()` | Stops page reload    |

## Why Controlled Components are Preferred?

✔ Easy validation
✔ Dynamic UI updates
✔ Conditional disabling
✔ Predictable behavior
✔ Works well with React state & effects

## Controlled Components Flow

```pgsql
User types → onChange fires → setState →
Component re-renders → input gets new value
```

## Multiple Inputs Example

```jsx
const [form, setForm] = useState({
  email: "",
  password: ""
});

const handleChange = (e) => {
  setForm({
    ...form,
    [e.target.name]: e.target.value
  });
};
```

```jsx
<input name="email" value={form.email} onChange={handleChange} />
<input name="password" value={form.password} onChange={handleChange} />
```

# Uncontrolled Components

## Uncontrolled = DOM manages the value (using ref)

- An Uncontrolled Component is a form element where the DOM itself manages the form data, not React state.
- React accesses the value only when needed, using refs.
- Uncontrolled components let the DOM manage form data, and React accesses values using refs, typically on submit.

```jsx
const inputRef = useRef();

<input ref={inputRef} />

console.log(inputRef.current.value);
```

```jsx
const inputRef = useRef();

<input ref={inputRef} />

console.log(inputRef.current.value);
```

| Feature        | Controlled | Uncontrolled |
|----------------|------------|--------------|
| State          | React      | DOM          |
| Validation     | Easy       | Hard         |
| Predictability | High       | Low          |
| Recommended    | ✅ Yes      | ❌ Rare       |

### Uncontrolled Input

```jsx
function LoginForm() {
  const inputRef = React.useRef();

  const handleSubmit = (e) => {
    e.preventDefault();
    console.log(inputRef.current.value);
  };

  return (
    <form onSubmit={handleSubmit}>
      <input type="text" ref={inputRef} />
      <button type="submit">Submit</button>
    </form>
  );
}
```

| Part                     | Explanation        |
|--------------------------|--------------------|
| `ref={inputRef}`         | Direct DOM access  |
| `inputRef.current.value` | Reads value        |
| No `onChange`            | DOM controls value |

### Uncontrolled Component Flow

```pgsql
User types → Browser stores value →
React reads value via ref (on submit)
```

### Uncontrolled with defaultValue

```jsx
<input type="text" defaultValue="Baba" />
```

| Feature      | Controlled      | Uncontrolled    |
|--------------|-----------------|-----------------|
| Value source | React state     | DOM             |
| onChange     | Required        | Not needed      |
| Validation   | Easy            | Difficult       |
| Performance  | Slightly slower | Slightly faster |
| Recommended  | ✅ Yes           | ⚠️ Limited use  |


